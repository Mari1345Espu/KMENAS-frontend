<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üè† Sistema de Ubicaci√≥n √ìptima de Hospitales - K-Means</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè† Sistema de Ubicaci√≥n √ìptima de Hospitales</h1>
            <p>Algoritmo K-Means - Ubicaci√≥n estrat√©gica de hospitales basada en clusters de casas</p>
        </div>

        <!-- Controles Principales -->
        <div class="controls">
            <div class="control-group">
                <label for="anchoEspacio">Ancho del Espacio (m):</label>
                <input type="number" id="anchoEspacio" value="100" min="50" max="500">
                <small>Ancho del √°rea en unidades</small>
            </div>
            
            <div class="control-group">
                <label for="altoEspacio">Alto del Espacio (n):</label>
                <input type="number" id="altoEspacio" value="100" min="50" max="500">
                <small>Alto del √°rea en unidades</small>
            </div>
            
            <div class="control-group">
                <label for="nCasas">N√∫mero de Casas:</label>
                <input type="number" id="nCasas" value="80" min="10" max="300">
                <button onclick="app.generarCasas()" class="btn btn-primary">
                    üè† Generar Casas
                </button>
            </div>
            
            <div class="control-group">
                <label for="kHospitales">N√∫mero de Hospitales (k):</label>
                <input type="number" id="kHospitales" value="3" min="1" max="15">
                <button onclick="app.calcularHospitales()" class="btn btn-success">
                    üè• Calcular Ubicaciones
                </button>
            </div>
            
            <div class="control-group">
                <label>An√°lisis Avanzado:</label>
                <button onclick="app.analizarKOptimo()" class="btn btn-info">
                    üìä Analizar K √ìptimo
                </button>
            </div>
        </div>

        <!-- Panel de Estad√≠sticas -->
        <div class="stats-panel" id="statsPanel" style="display: none;">
            <div class="stat-item">
                <div class="stat-value" id="statAncho">100</div>
                <div class="stat-label">Ancho (m)</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="statAlto">100</div>
                <div class="stat-label">Alto (n)</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="statCasas">0</div>
                <div class="stat-label">Total Casas</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="statHospitales">0</div>
                <div class="stat-label">Hospitales (k)</div>
            </div>
        </div>

        <!-- Loading -->
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Procesando algoritmo K-Means...</p>
        </div>

        <!-- √Årea principal: visualizaciones + barra lateral -->
        <div class="main-area">

            <!-- Visualizaci√≥n Principal (charts apilados) -->
            <div class="visualization">
            <div class="chart-container">
                <h3>üó∫Ô∏è Mapa de Casas</h3>
                <div class="chart-wrapper">
                    <canvas id="mapaCasas"></canvas>
                </div>
                <div class="chart-controls">
                    <div class="slider-control">
                        <label for="tama√±oPuntosCasas">Tama√±o Casas:</label>
                        <input type="range" id="tama√±oPuntosCasas" min="2" max="10" value="5" step="1">
                    </div>
                </div>
            </div>
            
            <div class="chart-container">
                <h3>üè• Resultado K-Means - Clusters</h3>
                <div class="result-with-sidebar">
                    <div class="chart-area">
                        <div class="chart-wrapper">
                            <canvas id="mapaResultado"></canvas>
                        </div>
                        <div class="chart-controls">
                            <div class="slider-control">
                                <label for="tama√±oPuntosClusters">Tama√±o Casas:</label>
                                <input type="range" id="tama√±oPuntosClusters" min="2" max="10" value="5" step="1">
                            </div>
                            <div class="slider-control">
                                <label for="tama√±oHospitales">Tama√±o Hospitales:</label>
                                <input type="range" id="tama√±oHospitales" min="8" max="20" value="12" step="1">
                            </div>
                        </div>
                        <div class="iteration-controls">
                            <button onclick="app.iteracionAnterior()" class="btn btn-primary">‚Üê Anterior</button>
                            <span id="iteracionActual">Iteraci√≥n: 0</span>
                            <button onclick="app.iteracionSiguiente()" class="btn btn-primary">Siguiente ‚Üí</button>
                        </div>
                    </div>

                    <!-- Sidebar para hospitales (lista, centrar, acciones) colocada junto a la gr√°fica de resultado -->
                    <aside class="sidebar" id="sidebarHospitals" aria-label="Panel de hospitales">
                        <!-- El contenido se genera din√°micamente -->
                    </aside>
                </div>
            </div>
            </div>
        </div>

        <!-- M√©tricas de Calidad -->
        <div class="metrics" id="metricsSection" style="display: none;">
            <h3>üìà M√©tricas de Calidad del Clustering</h3>
            <div class="metrics-grid" id="metricsGrid">
                <!-- Las m√©tricas se llenar√°n din√°micamente -->
            </div>
        </div>

        <!-- Evaluaci√≥n de Calidad -->
        <div class="quality-assessment" id="qualityAssessment" style="display: none;">
            <h3>üéØ Evaluaci√≥n de Calidad - k Elegido vs k √ìptimo</h3>
            <div class="assessment-card">
                <div class="assessment-header">
                    <h4 id="assessmentTitle">Evaluando calidad del clustering...</h4>
                    <div class="score-badge" id="scoreBadge">0/8</div>
                </div>
                <div class="assessment-details" id="assessmentDetails">
                    <!-- Detalles se llenar√°n din√°micamente -->
                </div>
                <div class="recommendation" id="assessmentRecommendation">
                    <!-- Recomendaci√≥n se llenar√° din√°micamente -->
                </div>
            </div>
        </div>

        <!-- Gr√°fico de Comparaci√≥n de K -->
        <div class="comparison-chart" id="comparisonSection" style="display: none;">
            <h3>üìä An√°lisis de K √ìptimo - M√©todo del Codo</h3>
            <div class="chart-wrapper">
                <canvas id="chartComparacion"></canvas>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
